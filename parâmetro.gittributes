CREATE TABLE PESSOA(
   ID NUMBER(4) PRIMARY KEY, 
   NOME VARCHAR2(120) NOT NULL,
   CONSTRAINT UQ_NOME_PESSOA UNIQUE (NOME)
);
INSERT INTO PESSOA (ID, NOME) VALUES (1, 'João Silva');
INSERT INTO PESSOA (ID, NOME) VALUES (2, 'Maria Silva');
INSERT INTO PESSOA (ID, NOME) VALUES (3, 'Claudia Souza');
INSERT INTO PESSOA (ID, NOME) VALUES (4, 'Jurema Paschoal');
INSERT INTO PESSOA (ID, NOME) VALUES (5, 'André Paulo');
COMMIT;


CREATE OR REPLACE PROCEDURE PROC_PEGARNOMEPESSOA (P_ID IN NUMBER, P_SAIDA OUT VARCHAR2)
IS
   V_QTDE NUMBER(1);
   V_NOME PESSOA.NOME%TYPE;
BEGIN
   IF P_ID > 0 AND P_ID <= 9999 THEN
      SELECT COUNT(*) INTO V_QTDE FROM PESSOA WHERE ID = P_ID;
      IF V_QTDE = 1 THEN
         SELECT NOME INTO V_NOME FROM PESSOA WHERE ID = P_ID;
         P_SAIDA := V_NOME;
      ELSE
         P_SAIDA := 'Pessoa não encontrada'; 
      END IF;
   ELSE
      P_SAIDA := 'Pessoa não encontrada'; 
   END IF;
END;




--CASO DE TESTE 1
DECLARE
   RETORNO VARCHAR2(120);
BEGIN
   PROC_PEGARNOMEPESSOA(4, RETORNO);
   DBMS_OUTPUT.PUT_LINE('RESULTADO DA EXECUÇÃO DA PROCEDURE: ' || RETORNO);
END;

---CASO DE TESTE 2
DECLARE
   RETORNO VARCHAR2(120);
BEGIN
   PROC_PEGARNOMEPESSOA(9, RETORNO);
   DBMS_OUTPUT.PUT_LINE('RESULTADO DA EXECUÇÃO DA PROCEDURE: ' || RETORNO);
END;

---CASO DE TESTE 3
DECLARE
   RETORNO VARCHAR2(120);
BEGIN
   PROC_PEGARNOMEPESSOA(NULL, RETORNO);
   DBMS_OUTPUT.PUT_LINE('RESULTADO DA EXECUÇÃO DA PROCEDURE: ' || RETORNO);
END;

---CASO DE TESTE 4
DECLARE
   RETORNO VARCHAR2(120);
BEGIN
   PROC_PEGARNOMEPESSOA(-15, RETORNO);
   DBMS_OUTPUT.PUT_LINE('RESULTADO DA EXECUÇÃO DA PROCEDURE: ' || RETORNO);
END;
